<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>QA Scorecard</title>
  </head>
  <body>
    <h2>QA Scorecard</h2>

    <label for="tone">Tone:</label>
    <select id="tone">
      <option value="0">0</option><option value="1">1</option><option value="2">2</option>
      <option value="3">3</option><option value="4">4</option><option value="5">5</option>
    </select><br><br>

    <label for="process">Process:</label>
    <select id="process">
      <option value="0">0</option><option value="1">1</option><option value="2">2</option>
      <option value="3">3</option><option value="4">4</option><option value="5">5</option>
    </select><br><br>

    <label for="fields">Fields Populated:</label>
    <select id="fields">
      <option value="0">0</option><option value="1">1</option><option value="2">2</option>
      <option value="3">3</option><option value="4">4</option><option value="5">5</option>
    </select><br><br>

    <label for="resolution">Resolution:</label>
    <select id="resolution">
      <option value="0">0</option><option value="1">1</option><option value="2">2</option>
      <option value="3">3</option><option value="4">4</option><option value="5">5</option>
    </select><br><br>

    <label for="comments">Comments:</label><br>
    <textarea id="comments" rows="3" cols="30"></textarea><br><br>

    <button id="submitButton">Submit</button>

    <p id="averageDisplay"></p>

    <!-- Zendesk SDK + Logic -->
    <script src="https://assets.zendesk.com/apps/sdk/2.0/zaf_sdk.js"></script>
    <script>
      const client = ZAFClient.init();

      document.getElementById("submitButton").addEventListener("click", function () {
        const scores = [
          parseInt(document.getElementById("tone").value),
          parseInt(document.getElementById("process").value),
          parseInt(document.getElementById("fields").value),
          parseInt(document.getElementById("resolution").value)
        ];

        const average = (scores.reduce((a, b) => a + b, 0) / scores.length).toFixed(2);
        const comments = document.getElementById("comments").value;

        document.getElementById("averageDisplay").innerText = "Average: " + average;
        
        client.set({
          "ticket.customField:custom_field_33381915668503": average,
          "ticket.customField:custom_field_33385749219223": comments
        }).then(() => {
          console.log("QA Score updated to:", average);
          console.log("QA Comments updated to:", comments);
          alert("QA Score and Comments saved to ticket!");
        });
      });
    </script>
  </body>
</html>
